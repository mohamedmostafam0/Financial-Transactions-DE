# dbt/models/staging/_sources.yml
version: 2

sources:
  - name: raw_data # Arbitrary source group name
    database: "{{ env_var('DBT_SNOWFLAKE_DATABASE') }}" # Use your raw database name
    schema: RAW # Schema where Kafka Connect lands data
    tables:
      - name: RAW_TRANSACTIONS # Table created by Snowflake Connector
        description: "Raw transaction data ingested from Kafka via Snowflake Connector."
        # Optionally define columns and tests on the raw source data
        columns:
          - name: RECORD_CONTENT # Assuming connector loads JSON into a VARIANT column
            description: "Raw JSON payload from Kafka."
            tests:
              - not_null # Ensure the variant column itself isn't null
          - name: RECORD_METADATA
            description: "Metadata added by Snowflake Connector."